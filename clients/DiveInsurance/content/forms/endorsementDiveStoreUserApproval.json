{
	"_id": "5ef1f75c3944848e2f058e93",
	"type": "form",
	"tags": [],
	"owner": "5e1f430cb451f91416ebd5cd",
	"components": [{
		"title": "Quote Information",
		"theme": "primary",
		"breadcrumb": "none",
		"breadcrumbClickable": true,
		"buttonSettings": {
			"previous": true,
			"cancel": true,
			"next": true
		},
		"collapsible": false,
		"tableView": false,
		"key": "page5Panel",
		"type": "panel",
		"label": "Rate Car",
		"input": false,
		"components": [{
			"label": "documents",
			"key": "documents",
			"properties": {
				"data_type": "list"
			},
			"type": "hidden",
			"input": true,
			"tableView": false
		}, {
			"type": "documentviewer",
			"key": "documents1",
			"label": "Quote Information",
			"calculateValue": "value = (data['documents'])",
			"hideLabel": true,
			"inputType": "documentviewer",
			"input": 1,
			"refreshOn": "documents",
			"tableView": false,
			"protected": true,
			"persistent": false
		}, {
			"label": "orgId",
			"key": "orgId",
			"type": "hidden",
			"input": true,
			"tableView": false,
			"defaultValue": "f0033dc0-126b-40ba-89e0-d3061bdeda4c"
		}, {
			"key": "page5Panel2",
			"input": false,
			"title": "Approval",
			"theme": "primary",
			"tableView": false,
			"components": [{
				"label": "well",
				"tableView": false,
				"key": "well4",
				"type": "well",
				"input": false,
				"components": [{
					"label": "I hereby declare that I accept the proposal",
					"optionsLabelPosition": "right",
					"inline": false,
					"tableView": true,
					"values": [{
						"value": "accepted",
						"label": "Accept",
						"shortcut": ""
					}, {
						"value": "rejected",
						"label": "Decline",
						"shortcut": ""
					}],
					"validate": {
						"required": true
					},
					"key": "userApproved",
					"properties": {
						"": "page7"
					},
					"type": "radio",
					"input": true,
					"lockKey": true
				}, {
					"label": "Rejection Reason",
					"reorder": false,
					"addAnotherPosition": "bottom",
					"defaultOpen": false,
					"layoutFixed": false,
					"enableRowGroups": false,
					"hideLabel": true,
					"tableView": true,
					"defaultValue": [{
						"reason": ""
					}],
					"clearOnHide": false,
					"validate": {
						"minLength": 1
					},
					"key": "rejectionReason",
					"conditional": {
						"show": true,
						"when": "approved",
						"eq": "rejected"
					},
					"type": "datagrid",
					"input": true,
					"components": [{
						"label": "",
						"tableView": true,
						"key": "rejectionReasonssswell",
						"type": "well",
						"input": false,
						"components": [{
							"label": "Reason for Rejection",
							"spellcheck": false,
							"tableView": false,
							"case": "mixed",
							"clearOnHide": false,
							"validate": {
								"required": true,
								"customMessage": "Rejection reason is required"
							},
							"key": "reason",
							"type": "textfield",
							"input": true,
							"hideOnChildrenHidden": false
						}]
					}]
				}, {
					"label": "Additional Notes",
					"tableView": true,
					"key": "additionalNotes",
					"conditional": {
						"show": true,
						"when": "approved",
						"eq": "accepted"
					},
					"type": "textfield",
					"input": true
				}],
				"path": "well4",
				"clearOnHide": false,
				"hideLabel": true
			}],
			"type": "panel",
			"lockKey": true,
			"label": "Panel",
			"path": "page5Panel2"
		}, {
			"title": "Attachments",
			"theme": "primary",
			"collapsible": false,
			"tableView": false,
			"key": "csrAttachmentsPanel",
			"customConditional": "if (data.privileges){\n  show = (data.privileges['MANAGE_POLICY_APPROVAL_WRITE'] !== null && data.privileges['MANAGE_POLICY_APPROVAL_WRITE']) ? true: false;\n}\nelse{\n  show = false;\n}",
			"type": "panel",
			"label": "Attachments",
			"input": false,
			"components": [{
				"label": "Attachments",
				"hideLabel": true,
				"tableView": true,
				"storage": "url",
				"webcam": true,
				"fileTypes": [{
					"label": "",
					"value": ""
				}],
				"filePattern": ".pdf,.png,.jpeg,.jpg,.gif,.doc,.docx,.xlsx,.xls",
				"fileMaxSize": "10MB",
				"multiple": true,
				"clearOnHide": false,
				"validate": {
					"custom": "show = (!data.csrApprovalAttachments || typeof(data.csrApprovalAttachments) != 'string')",
					"multiple": true
				},
				"key": "csrApprovalAttachments",
				"customConditional": "show = (!data.csrApprovalAttachments || typeof(data.csrApprovalAttachments) != 'string')",
				"type": "file",
				"input": true,
				"url": "/file/attachment"
			}]
		}, {
			"title": "Payment Information",
			"theme": "primary",
			"collapsible": false,
			"tableView": false,
			"key": "page7",
			"properties": {
				"payment_confirmation_page": "true"
			},
			"customConditional": "show = (data.userApproved == \"accepted\" && parseFloat(data.totalAmount) > 0)",
			"type": "panel",
			"label": "Payment Information",
			"breadcrumb": "none",
			"buttonSettings": {
				"previous": true,
				"cancel": true,
				"next": true
			},
			"components": [{
				"label": "payment",
				"calculateValue": "value = 'true';",
				"key": "payment",
				"type": "hidden",
				"input": true,
				"tableView": false
			}, {
				"label": "automatic_renewal",
				"customDefaultValue": "value = false;",
				"key": "automatic_renewal",
				"type": "hidden",
				"input": true,
				"tableView": false
			}, {
				"label": "amountPayable",
				"calculateValue": "if(data.premiumFinanceSelect == 'yes'){\n  var month =moment(data.start_date).month() +1;\n  var day = moment(data.start_date).format('DD');\n  if((day == 30 && month == 6) || month == 7){\n    value = (parseFloat(data.totalAmount).toFixed(2))*30/100;\n    data.paymentInstallments = 6;\n  } else if(month == 8){\n    value = (parseFloat(data.totalAmount).toFixed(2))*35/100;\n    data.paymentInstallments = 5;\n  }else if(month == 9){\n    value = (parseFloat(data.totalAmount).toFixed(2))*40/100;\n    data.paymentInstallments = 4;\n  } else if(month == 10){\n    value = (parseFloat(data.totalAmount).toFixed(2))*45/100;\n    data.paymentInstallments = 3;\n  } else {\n    value = parseFloat(data.totalAmount).toFixed(2);\n    data.paymentInstallments = 0;\n  }\n} else {\nvalue = parseFloat(data.totalAmount).toFixed(2);\ndata.paymentInstallments = 0;\n}",
				"key": "amountPayable",
				"type": "hidden",
				"input": true,
				"tableView": false
			}, {
				"label": "amount",
				"calculateValue": "value = data.totalAmount",
				"key": "amount",
				"type": "hidden",
				"input": true,
				"tableView": false
			}, {
				"label": "transaction_reference_number",
				"key": "transactionReferenceNumber",
				"type": "hidden",
				"input": true,
				"tableView": false
			}, {
				"label": "Columns",
				"columns": [{
					"components": [{
						"label": "Final Amount Payable",
						"prefix": "$",
						"mask": false,
						"spellcheck": false,
						"disabled": true,
						"tableView": false,
						"delimiter": true,
						"requireDecimal": true,
						"inputFormat": "plain",
						"redrawOn": "amountPayable",
						"clearOnHide": false,
						"calculateValue": "value = data.amountPayable",
						"key": "finalAmountPayable",
						"type": "number",
						"decimalLimit": 2,
						"input": true,
						"inputType": "text",
						"hideOnChildrenHidden": false
					}, {
						"label": "Payment Options",
						"optionsLabelPosition": "right",
						"inline": false,
						"tableView": false,
						"values": [{
							"label": "Money Order",
							"value": "moneyOrder",
							"shortcut": ""
						}, {
							"label": "Check",
							"value": "check",
							"shortcut": ""
						}, {
							"label": "Credit Card",
							"value": "creditCard",
							"shortcut": ""
						}, {
							"label": "Other",
							"value": "other",
							"shortcut": ""
						}],
						"clearOnHide": false,
						"validate": {
							"required": true,
							"custom": "if(data.paymentOptions == \"creditCard\" && data.privileges['MANAGE_MY_POLICY_READ']){\n  if(document.getElementsByClassName(\"formio-component-submit\")[0] && data.privileges) ){\n    document.getElementsByClassName(\"formio-component-submit\")[0].style.display = \"none\";\n    if( data.privileges['MANAGE_POLICY_APPROVAL_WRITE'] = true ||  data.privileges['MANAGE_POLICY_APPROVAL_WRITE']){\n      document.getElementsByClassName(\"formio-component-submit\")[0].style.display = \"block\";\n    }\n  }else{\n    document.getElementsByClassName(\"formio-component-submit\")[0].style.display = \"block\";\n  }\n}else{\n  document.getElementsByClassName(\"formio-component-submit\")[0].style.display = \"block\";\n}"
						},
						"key": "paymentOptions",
						"properties": {
							"render": "columns"
						},
						"logic": [{
							"name": "Disable on Installment Payment",
							"trigger": {
								"type": "simple",
								"simple": {
									"when": "premiumFinanceSelect",
									"eq": "yes",
									"show": true
								}
							},
							"actions": [{
								"name": "Select Credit Card",
								"type": "value",
								"value": "return \"creditCard\""
							}, {
								"name": "Disable Options",
								"type": "property",
								"property": {
									"label": "Disabled",
									"value": "disabled",
									"type": "boolean"
								},
								"state": true
							}]
						}, {
							"name": "Enable on Premium Finance",
							"trigger": {
								"type": "simple",
								"simple": {
									"when": "premiumFinanceSelect",
									"eq": "no",
									"show": true
								}
							},
							"actions": [{
								"name": "Enable All fields",
								"type": "property",
								"property": {
									"label": "Disabled",
									"value": "disabled",
									"type": "boolean"
								},
								"state": false
							}]
						}],
						"type": "radio",
						"input": true,
						"hideOnChildrenHidden": false
					}],
					"width": 6,
					"offset": 0,
					"push": 0,
					"pull": 0,
					"size": "md"
				}, {
					"components": [{
						"title": "Check Details",
						"theme": "primary",
						"collapsible": false,
						"tableView": false,
						"key": "checkDetails",
						"conditional": {
							"show": true,
							"when": "paymentOptions",
							"eq": "check"
						},
						"type": "panel",
						"label": "Check Details",
						"input": false,
						"components": [{
							"label": "Check Number",
							"mask": false,
							"spellcheck": true,
							"tableView": false,
							"delimiter": false,
							"requireDecimal": false,
							"inputFormat": "plain",
							"clearOnHide": false,
							"key": "chequeNumber",
							"type": "number",
							"input": true,
							"hideOnChildrenHidden": false
						}, {
							"label": "Upload Consent Form",
							"tableView": false,
							"storage": "url",
							"webcam": true,
							"fileTypes": [{
								"label": "",
								"value": ""
							}],
							"clearOnHide": false,
							"key": "chequeConsentForm",
							"type": "file",
							"url": "/file/attachment",
							"input": true
						}],
						"hideOnChildrenHidden": false
					}, {
						"title": "Card Details",
						"theme": "primary",
						"collapsible": false,
						"tableView": false,
						"key": "cardDetails",
						"conditional": {
							"show": true,
							"when": "paymentOptions",
							"eq": "creditCard"
						},
						"type": "panel",
						"label": "Card Details",
						"input": false,
						"components": [{
							"label": "Transaction Reference Number",
							"spellcheck": false,
							"disabled": true,
							"tableView": false,
							"clearOnHide": false,
							"calculateValue": "value = data.transaction_reference_number",
							"key": "transactionId",
							"customConditional": "if (data.privileges){\n  show = (data.privileges['MANAGE_POLICY_APPROVAL_WRITE'] !== null && data.privileges['MANAGE_POLICY_APPROVAL_WRITE']) ? true: false;\n}\nelse{\n  show = false;\n}",
							"type": "textfield",
							"input": true
						}, {
							"type": "convergepay",
							"key": "creditcardPayment",
							"amount_field": "finalAmountPayable",
							"label": "custom",
							"input": true,
							"tableView": false,
							"hideOnChildrenHidden": false
						}, {
							"label": "Content",
							"attrs": [{
								"value": "",
								"attr": ""
							}],
							"content": "</br><b><font color=\"red\">If you click \"Confirm Order\", your credit card will be charged for the amount shown above.</b></font>",
							"refreshOnChange": false,
							"tableView": false,
							"key": "page7Content",
							"conditional": {
								"show": true,
								"when": "paymentOptions",
								"eq": "creditCard"
							},
							"type": "htmlelement",
							"input": false,
							"hideLabel": true,
							"hideOnChildrenHidden": false
						}],
						"hideOnChildrenHidden": false
					}, {
						"title": "Money Order Details",
						"theme": "primary",
						"collapsible": false,
						"tableView": false,
						"key": "moneyOrderDetai",
						"conditional": {
							"show": true,
							"when": "paymentOptions",
							"eq": "moneyOrder"
						},
						"type": "panel",
						"label": "Money Order Details",
						"input": false,
						"hideOnChildrenHidden": false,
						"components": [{
							"label": "Order ID",
							"tableView": true,
							"clearOnHide": false,
							"key": "orderId",
							"type": "textfield",
							"input": true,
							"hideOnChildrenHidden": false
						}]
					}],
					"width": 6,
					"offset": 0,
					"push": 0,
					"pull": 0,
					"size": "md"
				}],
				"tableView": false,
				"key": "columns",
				"properties": {
					"payment_confirmation_page": "true"
				},
				"type": "columns",
				"input": false
			}, {
				"input": true,
				"tableView": true,
				"key": "transaction_id",
				"label": "transaction_id",
				"type": "hidden",
				"lockKey": true
			}, {
				"input": true,
				"tableView": true,
				"key": "transaction_status",
				"label": "transaction_status",
				"type": "hidden",
				"lockKey": true
			}],
			"input": false,
			"lockKey": true,
			"breadcrumbClickable": true
		}, {
			"title": "Payment Approval",
			"theme": "primary",
			"collapsible": false,
			"tableView": false,
			"key": "paymentApprovalPanel",
			"customConditional": "if (data.privileges){\n  show = (data.privileges['MANAGE_POLICY_APPROVAL_WRITE'] !== null && data.privileges['MANAGE_POLICY_APPROVAL_WRITE'] && data.policyStatus != 'Quote Approval Pending') ? true: false;\n}\nelse{\n  show = false;\n}",
			"type": "panel",
			"label": "Payment Approval",
			"input": false,
			"components": [{
				"label": "Columns",
				"columns": [{
					"components": [{
						"label": "Amount Recieved",
						"prefix": "$",
						"mask": false,
						"spellcheck": true,
						"tableView": false,
						"delimiter": true,
						"requireDecimal": true,
						"inputFormat": "plain",
						"clearOnHide": false,
						"key": "paymentRecieved",
						"type": "number",
						"decimalLimit": 2,
						"input": true,
						"hideOnChildrenHidden": false
					}, {
						"label": "Amount Pending",
						"prefix": "$",
						"mask": false,
						"spellcheck": true,
						"tableView": false,
						"delimiter": true,
						"requireDecimal": true,
						"inputFormat": "plain",
						"key": "amountPending",
						"type": "number",
						"decimalLimit": 2,
						"input": true,
						"hideOnChildrenHidden": false
					}],
					"offset": 0,
					"push": 0,
					"pull": 0,
					"size": "md",
					"width": 12
				}, {
					"components": [],
					"width": 6,
					"offset": 0,
					"push": 0,
					"pull": 0,
					"size": "md"
				}],
				"tableView": false,
				"key": "columns1",
				"customConditional": "show = (parseFloat(data.totalAmount) > 0)",
				"type": "columns",
				"input": false
			}, {
				"label": "Payment Verified",
				"optionsLabelPosition": "right",
				"inline": true,
				"tableView": false,
				"values": [{
					"label": "Approved",
					"value": "approved",
					"shortcut": ""
				}, {
					"label": "Declined",
					"value": "declined",
					"shortcut": ""
				}],
				"clearOnHide": false,
				"validate": {
					"required": true
				},
				"key": "paymentVerified",
				"type": "radio",
				"input": true
			}, {
				"label": "Notes",
				"autoExpand": false,
				"tableView": true,
				"key": "notes",
				"type": "textarea",
				"input": true
			}]
		}],
		"path": "page5Panel"
	}, {
		"label": "Submit",
		"showValidations": false,
		"tableView": false,
		"key": "submit",
		"type": "button",
		"event": "submitForm",
		"input": true
	}],
	"controller": "",
	"revisions": "",
	"_vid": 0,
	"title": "Endorsement DiveStore User Approval",
	"display": "form",
	"access": [{
		"roles": ["5ce43aa430776b950569301d", "5ce43aa430776b4a5969301e", "5ce43aa430776bdfb569301f"],
		"type": "read_all"
	}],
	"submissionAccess": [],
	"settings": {},
	"properties": {
		"commands": "[{\"command\" : \"delegate\",\"delegate\":\"RateCard\"}]",
		"submission_commands": "[{\"command\" : \"submitWorkflow\"}]"
	},
	"name": "endorsementDiveStoreUserApproval",
	"path": "endorsementdivestoreuserapproval",
	"project": "5ce43aa430776b2aff69301c",
	"created": "2020-06-23T12:36:44.836Z",
	"modified": "2020-07-02T10:44:47.975Z",
	"machineName": "testdivehub:endorsementDiveStoreUserApproval"
}