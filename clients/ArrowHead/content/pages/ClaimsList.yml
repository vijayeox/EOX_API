name: 'Claims'
description: 'Shows a list of claims realated to a workbook'
content:
    -
        type: Document
        content:
            jsx: '  {
                <h5 className="totalClaimsAmount">
                  Total Claims Amount ${sumTotal > 0 ?  sumTotal : 0}
                </h5>
              }'
            params:
                sumTotal: 'data.reduce((a, b) => (a ? a : 0) + (b.total ? b.total : 0),0)'
            url: 'file/search/entity/Policy Claims'
        # url: 'file/search/entity/Policy Claims/assoc/{{parentFileId}}'
    -
        type: List
        content:
            route: 'file/search/entity/Policy Claims'
            # route: 'file/search/entity/Policy Claims/assoc/{{parentFileId}}'
            defaultFilters:
                skip: 0
                take: 100
                sort:
                    -
                        field: date_created
                        dir: desc
            filterable: false           
            resizable: true
            sortable: 
                allowUnsort: true
                mode: single
            gridToolbar: '<h5> {data.namedInsured} - Claims Summary</h5>'
            wrapStyle:
                height: "90%"
            operations:
                title: "Add New Claim"
                actions:
                    -
                        name: Add New Claim
                        rule: "true"
                        details:
                            -
                                type: List
                                content:
                                    route: 'file/search/entity/Policy Claims'
                                    # route: 'file/search/entity/Policy Claims/assoc/{{parentFileId}}'
                                    filterable: false           
                                    resizable: false
                                    sortable: false
                                    wrapStyle:
                                        height: "30%"
                                    columnConfig:
                                        -
                                            title: Value Date
                                            field: valueDate
                                            cell: '<td>{formatDate(item.valueDate)}</td>'
                                            filter: date
                                            filterFormat: YYYY-MM-DD
                                        -
                                            title: Loss Date
                                            field: lossDate
                                            cell: '<td>{formatDate(item.lossDate)}</td>'
                                            filter: date
                                            filterFormat: YYYY-MM-DD
                                        -
                                            title: "Paid Amount"
                                            field: paid
                                            filter: numeric
                                        - 
                                            title: "Reserve Amount"
                                            field: reserve
                                            filter: numeric
                                        - 
                                            title: Total Amount
                                            field: total
                                            filter: numeric
                                        - 
                                            title: Level 1
                                            field: claimlevel1
                                        - 
                                            title: Carrier
                                            field: carrier
                            -
                                type: Document
                                content:
                                    jsx: '  {
                                        <h5 className="totalClaimsAmountMini">
                                          Total Claims Amount ${sumTotal > 0 ?  sumTotal : 0}
                                        </h5>
                                      }'
                                    params:
                                        sumTotal: 'data.reduce((a, b) => (a ? a : 0) + (b.total ? b.total : 0),0)'
                                    url: 'file/search/entity/Policy Claims'
                                # url: 'file/search/entity/Policy Claims/assoc/{{parentFileId}}'
                            -
                                type: Form
                                form_id: 055cdece-c75c-4d33-b32c-800e05421406
                                parentFileId: '{{uuid}}'      
            actions:
                 -
                     name: Edit
                     rule: "true"
                     details:
                         -
                            type: Form
                            form_id: 055cdece-c75c-4d33-b32c-800e05421406
                            fileId: '{{uuid}}'
                     icon: 'far fa-pencil-alt'
            columnConfig:
                -
                    title: Value Date
                    field: valueDate
                    cell: '<td>{formatDate(item.valueDate)}</td>'
                    filter: date
                    filterFormat: YYYY-MM-DD
                -
                    title: Loss Date
                    field: lossDate
                    cell: '<td>{formatDate(item.lossDate)}</td>'
                    filter: date
                    filterFormat: YYYY-MM-DD
                -
                    title: "Paid Amount"
                    field: paid
                    filter: numeric
                - 
                    title: "Reserve Amount"
                    field: reserve
                    filter: numeric
                - 
                    title: Total Amount
                    field: total
                    filter: numeric
                - 
                    title: Level 1
                    field: claimlevel1
                    filterCell:
                        type: dropdown
                        listItems:
                            - "EPL"
                            - "Crime"
                            - "DOL - non-accident"
                            - "Auto Accident- Owned Auto"
                            - "Sales Practice"
                            - "Garagekeepers"
                            - "Products Liability"
                            - "Other General Liability"
                            - "Property"
                        placeholder: 'Select Level'
                - 
                    title: Carrier
                    field: carrier